---
const { obj } = Astro.props;

const comunas = [
  'Santiago', 
  'Cerrillos', 
  'Cerro Navia', 
  'Conchalí', 
  'El Bosque', 
  'Estación Central', 
  'Huechuraba', 
  'Independencia', 
  'La Cisterna', 
  'La Florida', 
  'La Granja', 
  'La Pintana', 
  'La Reina', 
  'Las Condes', 
  'Lo Barnechea', 
  'Lo Espejo', 
  'Lo Prado', 
  'Macul', 
  'Maipú', 
  'Ñuñoa', 
  'Pedro Aguirre Cerda', 
  'Peñalolén', 
  'Providencia', 
  'Pudahuel', 
  'Quilicura', 
  'Quinta Normal', 
  'Recoleta', 
  'Renca',
  'San Joaquín',
  'San Miguel',
  'San Ramón',
  'Vitacura',
  'Puente Alto',
  'San Bernardo',
];


---
<div class="box">
  <div class="field">
    <label class="label" for="comuna">Comuna</label>
    <div class="control">
      <div>
        <select id="comuna" name="comuna" class="form-select" required data-comuna={obj.comuna}>
          <option value="">Seleccione una opción</option>
          {comunas.map((comuna, index) => (
            <option value={index + 1}>{comuna}</option>
          ))}

        </select>
      </div>
    </div>
  </div>

  <div class="field">
    <label class="label" for="direccion">Dirección</label>
    <div class="input-group flex-nowrap">
      <span class="input-group-text" id="addon-wrapping"><img src="/static/assets/img/info.svg" alt=""/></span>
      <input type="text" id="direccion" name="direccion" class="form-control" placeholder="Ej. Avda. Libertador Bernardo O´Higgins 1825" value={obj.direccion}  required autocomplete="off"/>
    </div>
  </div>
  
  <div class="mt-3 form-check">
    
    {(obj.hasOwnProperty('declaraciondireccion') === false || obj.declaraciondireccion === null) && 
    <input id="declaraciondireccion" type="checkbox" class="form-check-input" name="declaraciondireccion" />
    }

    {obj.declaraciondireccion === 'on' && 
      <input id="declaraciondireccion" type="checkbox" class="form-check-input" name="declaraciondireccion" checked/>
    }
    

    <label class="form-check-label" for="declaraciondireccion">Declaro que la información entregada es fidedigna y en caso de demostrar lo contrario la matrícula será cancelada
    </label>
  </div>

  {obj.declaraciondireccion === null && 
    <div>
      <p class="alert alert-danger">
        Debe declarar que la información entregada es fidedigna.
      </p>
    </div>
  }

</div>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const select = document.getElementById('comuna') as HTMLInputElement;

    select.value = select.dataset.comuna as string;
  });
</script>